<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="initial-scale=1.0, width=device-width" />
  <link rel="stylesheet" type="text/css"
    href="https://js.api.here.com/v3/3.0/mapsjs-ui.css" />
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js">  </script>
  <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
  <script type="text/javascript" charset="UTF-8"
    src="https://js.api.here.com/v3/3.0/mapsjs-core.js"></script>
  <script type="text/javascript" charset="UTF-8"
    src="https://js.api.here.com/v3/3.0/mapsjs-service.js"></script>
  <script type="text/javascript" charset="UTF-8"
    src="https://js.api.here.com/v3/3.0/mapsjs-ui.js"></script>
  <script type="text/javascript" charset="UTF-8"
    src="https://js.api.here.com/v3/3.0/mapsjs-mapevents.js"></script>
  <script type="text/javascript">
      $.ajax({
            url: 'mappage.html',
            console.log("testing");
            complete: function(data) {
            console.log(data);
            }
      });</script>
</head>
<body>
  <div id="map" style="width: 100%; height: 800px; background: grey" />
  <script  type="text/javascript" charset="UTF-8" >
    
/**
 * Moves the map to display over Berlin
 *
 * @param  {H.Map} map      A HERE Map instance within the application
 */
function moveMapToBerlin(map){
  map.setCenter({lat:52.5159, lng:13.3777});
  map.setZoom(14);
}

function processJSON(json){
	var obj = JSON.parse(json);
	var maneuver = obj.route[0].leg.maneuver;
	var data = [[], [], []];
	for (var i = 0; i < maneuver.length; i++){
		data[0].push(maneuver[i].position.latitude);
		data[1].push(maneuver[i].position.longitude);
		data[2].push(maneuver[i].travelTime);
	}
	return data;
}




/**
 * Boilerplate map initialization code starts below:
 */

//Step 1: initialize communication with the platform
var platform = new H.service.Platform({
  app_id: 'coZYlKFfMv8P9SZZj5AF',
  app_code: 'b9mg-A1AaGwMKGdcIFPOJg',
  useCIT: true,
  useHTTPS: true
});
var defaultLayers = platform.createDefaultLayers();

//Step 2: initialize a map  - not specificing a location will give a whole world view.
var map = new H.Map(document.getElementById('map'),
  defaultLayers.normal.map);

//Step 3: make the map interactive
// MapEvents enables the event system
// Behavior implements default interactions for pan/zoom (also on mobile touch environments)
var behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(map));

// Create the default UI components
var ui = H.ui.UI.createDefault(map, defaultLayers);

var strip = new H.geo.Strip();

var points = processJSON(json);
for (var i = 0; i < points[0].length; i++){
	var p = new H.geo.Point(points[0][i], points[1][i]);
	strip.pushPoint(p);
}

var polyline = new H.map.Polyline(strip, { style: { lineWidth: 10 }});

// Add the polyline to the map:
map.addObject(polyline);

// Zoom the map to make sure the whole polyline is visible:
map.setViewBounds(polyline.getBounds());
// Now use the map as required...
//moveMapToBerlin(map);
  </script>
</body>
</html>